{"mappings":"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","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst form = document.querySelector('.form');\nconst inputDelay = document.querySelector('input[name=\"delay\"]');\nconst inputStep = document.querySelector('input[name=\"step\"]');\nconst inputAmount = document.querySelector('input[name=\"amount\"]');\nconst btn = document.querySelector('button');\n\nform.addEventListener('input', onFormDataValue);\nform.addEventListener('submit', createPromise);\nbtn.addEventListener('submit', onFormSubmit);\n\nconst STORAGE_KEY = 'form-state';\n\nconst formData = {};\n\nfunction onFormDataValue(e) {\n  formData[e.target.name] = e.target.value;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction getSavedFormData() {\n  const parsedData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n  formData.delay = parsedData.delay || '';\n  formData.step = parsedData.step || '';\n  formData.amount = parsedData.amount || '';\n}\n\ngetSavedFormData();\n\nlet delay = Number(formData.delay);\nlet amount = Number(formData.amount);\nlet step = Number(formData.step);\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position: position, delay: delay });\n      } else {\n        reject({ position: position, delay: delay });\n      }\n    }, delay);\n  });\n}\n\nfunction iterationPromise(amount) {\n  createPromise(amount, delay)\n    .then(({ position, delay }) => {\n      Notify.success(`Fulfilled promise ${position} in ${delay}ms`, {\n        timeout: 5000,\n        position: 'left-center',\n        distance: '130px',\n      });\n      console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n    })\n    .catch(({ position, delay }) => {\n      Notify.failure(`Rejected promise ${position} in ${delay}ms`, {\n        timeout: 5000,\n        position: 'left-center',\n        distance: '130px',\n      });\n      console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n    });\n  delay += step;\n}\n\nfor (let i = 1; i <= amount; i += 1) {\n  setTimeout(iterationPromise, step, i);\n}\n\nfunction onFormSubmit(e) {\n  localStorage.removeItem(STORAGE_KEY);\n\n  const { delay, step, amount } = formData;\n  inputDelay.value = delay;\n  inputStep.value = step;\n  inputAmount.value = amount;\n\n  document.removeEventListener('submit', createPromise);\n  document.removeEventListener('input', onFormDataValue);\n}\n\nonFormSubmit();\n\n// styling elements\nform.style.cssText =\n  'display: flex; gap: 10px; max-width: 600px; align-items: flex-end;';\nbtn.style.cssText =\n  'border: none; border-radius: 4px; width: 200px; padding: 7px; background-color: rgba(167, 191, 190, 0.5); font-size: 14px; cursor: pointer;';\n\nconst inputs = document.querySelectorAll('input');\nfor (const input of inputs) {\n  input.style.cssText =\n    'border: none; outline: 1px solid rgb(167, 191, 190); height: 28px; border-radius: 4px; margin-top: 8px;}';\n}\n\nconst labels = document.querySelectorAll('label');\nfor (const label of labels) {\n  label.style.fontSize = '14px';\n}\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$inputDelay","$ce04d3a99e08e73b$var$inputStep","$ce04d3a99e08e73b$var$inputAmount","$ce04d3a99e08e73b$var$btn","addEventListener","$ce04d3a99e08e73b$var$onFormDataValue","$ce04d3a99e08e73b$var$createPromise","$ce04d3a99e08e73b$var$onFormSubmit","parsedData","$ce04d3a99e08e73b$var$STORAGE_KEY","$ce04d3a99e08e73b$var$formData","e","target","name","value","localStorage","setItem","JSON","stringify","parse","getItem","delay","step","amount","$ce04d3a99e08e73b$var$delay","Number","$ce04d3a99e08e73b$var$amount","$ce04d3a99e08e73b$var$step","position","delay1","shouldResolve","Math","random","Promise","resolve","reject","setTimeout","$ce04d3a99e08e73b$var$iterationPromise","amount1","then","param","delay2","Notify","success","concat","timeout","distance","console","log","catch","delay3","failure","$ce04d3a99e08e73b$var$i","removeItem","delay4","step1","amount2","removeEventListener","style","cssText","$ce04d3a99e08e73b$var$inputs","querySelectorAll","$ce04d3a99e08e73b$var$_iteratorNormalCompletion","$ce04d3a99e08e73b$var$_didIteratorError","$ce04d3a99e08e73b$var$_iteratorError","undefined","$ce04d3a99e08e73b$var$_step","$ce04d3a99e08e73b$var$_iterator","Symbol","iterator","next","done","err","return","$ce04d3a99e08e73b$var$labels","$ce04d3a99e08e73b$var$_iteratorNormalCompletion1","$ce04d3a99e08e73b$var$_didIteratorError1","$ce04d3a99e08e73b$var$_iteratorError1","$ce04d3a99e08e73b$var$_step1","$ce04d3a99e08e73b$var$_iterator1","fontSize","err1"],"version":3,"file":"03-promises.ef7521db.js.map"}